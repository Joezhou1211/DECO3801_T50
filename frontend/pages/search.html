<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>Search Page with Filters</title>

    <link href="/css/search.css" rel="stylesheet">
    <link href="/css/style.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
</head>

<body>
    <!-- Header section -->
    <header class="header">
        <div class="logo">
            <img src="/assets/logo.png" alt="Website Logo">
        </div>

        <nav class="nav">
            <a href="/index.html">Home</a>
            <a href="/topics.html">Topics</a>
            <a href="/map.html">Map</a>
            <a href="/fakeNews.html">Fake News Detector</a>
            <a href="/search.html">Search/Download Data</a>
        </nav>

        <div class="user-icon">
            <img id="userAvatar" src="https://via.placeholder.com/50" alt="User Icon">
            <div class="dropdown-menu" id="dropdownMenu">
                <a href="/setting.html" rel="stylesheet">Setting</a>
                <a href="#" id="logout">Logout</a>
            </div>
        </div>
    </header>

    <!-- Main content section -->
    <div class="main-content">
        <div class="search-section">
            <h1>Search and Filters</h1>
            <div class="search-container">
                <input type="text" id="searchQuery" placeholder="Enter search term..." oninput="debouncedSearch()">
                <button onclick="SearchWithQuery()">Search</button>
                <button onclick="toggleFilters()" class="filters-button"><i class="fas fa-sliders-h"></i></button>
            </div>

            <!-- Filters section (in a modal window) -->
            <div class="filters-section" id="filtersSection" style="display: none;">
                <span class="filter-modal-close" onclick="toggleFilters()">&times;</span>

                <!-- Time Filter -->
                <div class="filter-item">
                    <label for="timeRangeStart">Time Range:</label>
                    <input type="date" id="timeRangeStart" onchange="debouncedSearch()">
                    <input type="date" id="timeRangeEnd" onchange="debouncedSearch()">
                </div>

                <!-- Location Filter -->
                <div class="filter-item">
                    <label for="location">Location:</label>
                    <select id="location" multiple onchange="updateLocationFilter()">
                        <option value="usa">USA</option>
                        <option value="uk">UK</option>
                        <option value="australia">Australia</option>
                        <option value="canada">Canada</option>
                    </select>
                    <div id="selected-locations"></div>
                    <span id="locationCount">News count: 0</span>
                </div>

                <!-- Topic Filter -->
                <div class="filter-item">
                    <label for="topic">Topic:</label>
                    <select id="topic" multiple onchange="updateTopicFilter()">
                        <option value="1">Wildlife and Environmental Impact</option>
                        <option value="2">Fundraising and Community Support</option>
                        <option value="3">Political Criticism and Government Response</option>
                        <option value="4">Climate Change Debate</option>
                        <option value="5">Emotional and Spiritual Reactions</option>
                        <option value="6">Geographical and Location-Based Information</option>
                        <option value="7">Regional Air Quality and Environmental Conditions</option>
                        <option value="8">Wildlife Devastation</option>
                        <option value="9">Emergency Information and Public Safety</option>
                        <option value="10">Health and Mental Well-being</option>
                    </select>
                    <div id="selected-topics"></div>
                </div>

                <!-- Sentiment Filter -->
                <div class="filter-item">
                    <label for="sentiment">Sentiment:</label>
                    <input type="range" id="sentiment" min="-100" max="100" step="1" oninput="updateSentimentDisplay()">
                    <span id="sentimentDisplay">Sentiment Value: 0</span>
                </div>

                <!-- Influence Tweet Factor Filter -->
                <div class="filter-item">
                    <label for="influenceTweetFactor">Influence Tweet Factor:</label>
                    <input type="range" id="influenceTweetFactor" min="0" max="100" oninput="updateInfluenceTweetFactorDisplay()">
                    <span id="influenceTweetFactorDisplay">0</span>
                </div>

                <!-- Influence User Filter -->
                <div class="filter-item">
                    <label for="influenceUser">Influence User:</label>
                    <input type="range" id="influenceUser" min="0" max="100" oninput="updateInfluenceUserDisplay()">
                    <span id="influenceUserDisplay">0</span>
                </div>

                <!-- Verified Account Filter -->
                <div class="filter-item">
                    <label for="verifiedAccount">Verified Account:</label>
                    <select id="verifiedAccount" onchange="debouncedSearch()">
                        <option value="all">All</option>
                        <option value="yes">Yes</option>
                        <option value="no">No</option>
                    </select>
                </div>

                <!-- Additional Filters -->
                <div class="filter-item">
                    <label for="retweetCount">Retweet Count:</label>
                    <input type="range" id="retweetCount" min="0" max="500" oninput="updateRetweetCountDisplay()">
                    <span id="retweetCountDisplay">0</span>
                </div>

                <div class="filter-item">
                    <label for="replyCount">Reply Count:</label>
                    <input type="range" id="replyCount" min="0" max="500" oninput="updateReplyCountDisplay()">
                    <span id="replyCountDisplay">0</span>
                </div>

                <div class="filter-item">
                    <label for="quoteCount">Quote Count:</label>
                    <input type="range" id="quoteCount" min="0" max="500" oninput="updateQuoteCountDisplay()">
                    <span id="quoteCountDisplay">0</span>
                </div>

                <div class="filter-item">
                    <label for="favouriteCount">Favourite Count:</label>
                    <input type="range" id="favouriteCount" min="0" max="500" oninput="updateFavouriteCountDisplay()">
                    <span id="favouriteCountDisplay">0</span>
                </div>

                <div class="filter-item">
                    <label for="extendedEntities">Extended Entities (Images Count):</label>
                    <input type="range" id="extendedEntities" min="0" max="4" oninput="updateExtendedEntitiesDisplay()">
                    <span id="extendedEntitiesDisplay">0</span>
                </div>

                <!-- Node Type Filter -->
                <div class="filter-item">
                    <label for="nodeType">Node Type:</label>
                    <select id="nodeType" onchange="debouncedSearch()">
                        <option value="all">All</option>
                        <option value="parent">Parent</option>
                        <option value="child">Child</option>
                    </select>
                </div>

                <!-- Author Keynode Filter -->
                <div class="filter-item">
                    <label for="authorKeynode">Author Keynode:</label>
                    <select id="authorKeynode" onchange="debouncedSearch()">
                        <option value="all">All</option>
                        <option value="yes">Yes</option>
                        <option value="no">No</option>
                    </select>
                </div>

                <!-- Hashtag Keynode Filter -->
                <div class="filter-item">
                    <label for="hashtagKeynode">Hashtag Keynode:</label>
                    <select id="hashtagKeynode" onchange="debouncedSearch()">
                        <option value="all">All</option>
                        <option value="yes">Yes</option>
                        <option value="no">No</option>
                    </select>
                </div>
            </div>

            <!-- Loading spinner -->
            <div class="loading-spinner" id="loadingSpinner"></div>

            <!-- Search results -->
            <div class="results" id="results"></div>

            <!-- Download button for selected items -->
            <div class="download-section">
                <button id="downloadButton" onclick="downloadSelected()">Download Selected</button>
            </div>
        </div>
    </div>

    <script src="/js/search.js"></script>
    <script src="/js/main.js"></script>
</body>

</html>
